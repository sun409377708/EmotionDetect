# 🌐 表情识别Web服务使用指南

## 🚀 服务状态

✅ **Web服务已启动成功！**

## 📍 访问地址

在浏览器中打开以下任一地址：

### 🏠 本地访问
```
http://localhost:8080
```

### 🌐 局域网访问 
```
http://0.0.0.0:8080
```
或使用您的IP地址：
```
http://[您的IP地址]:8080
```

## 💻 如何使用

### 1. 打开浏览器
在Chrome、Safari、Firefox等浏览器中打开上述地址

### 2. 上传图片
- **点击上传**: 点击"选择图片"按钮
- **拖拽上传**: 直接将图片拖拽到上传区域
- **支持格式**: JPG, PNG, GIF, BMP等常见图片格式
- **文件大小**: 最大16MB

### 3. 查看结果
- **表情识别**: 显示AI识别的主要表情
- **置信度**: 显示预测的可信程度
- **概率分布**: 显示7种表情的详细概率
- **人脸检测**: 如果检测到人脸会用绿框标出

## 📊 功能特色

### 🎯 智能人脸检测
- 自动检测图片中的人脸区域
- 如果检测到人脸，会优先分析人脸区域
- 没有检测到人脸时，分析整张图片

### 🎭 七种表情识别
1. 😠 **愤怒** (Angry)
2. 🤢 **厌恶** (Disgust) 
3. 😨 **恐惧** (Fear)
4. 😄 **开心** (Happy)
5. 😢 **悲伤** (Sad)
6. 😲 **惊讶** (Surprise)
7. 😐 **中性** (Neutral)

### 📈 详细分析结果
- **主要表情**: 最可能的表情类别
- **置信度**: 预测准确性的百分比
- **概率分布**: 所有表情的详细概率
- **彩色图表**: 直观的概率条形图

## 🔧 技术细节

### 模型信息
- **模型文件**: `best_emotion_model.h5`
- **模型大小**: 8.0 MB
- **参数数量**: 687,079个
- **输入尺寸**: 48x48像素灰度图
- **训练数据**: FER2013数据集

### 处理流程
1. **图片预处理**: 转换为48x48灰度图
2. **人脸检测**: 使用OpenCV Haar级联分类器
3. **表情预测**: 使用CNN模型进行推理
4. **结果可视化**: 绘制人脸框和表情标签

## 📱 界面预览

### 上传界面
- 🎨 现代化渐变背景
- 📤 拖拽上传支持
- 🔄 实时加载动画

### 结果界面
- 🖼️ 图片预览（带人脸标注）
- 🎯 表情预测结果
- 📊 概率分布图表
- 🎨 彩色分类标签

## ⚠️ 使用提示

### 📸 最佳图片要求
- **包含清晰人脸**: 人脸占图片较大比例
- **光线充足**: 避免过暗或过亮
- **正面角度**: 正面或轻微侧面效果最好
- **单人照片**: 多人照片会分析第一个检测到的人脸

### 🎯 预期效果
- **开心表情**: 识别效果最好 (86.6%准确率)
- **惊讶表情**: 识别效果很好 (80.5%准确率)
- **中性表情**: 识别效果良好 (69.3%准确率)
- **其他表情**: 可能存在一定误差

## 🛠️ 故障排除

### 无法访问网站
1. 确认服务正在运行
2. 检查端口5000是否被占用
3. 尝试重启服务

### 图片上传失败
1. 检查图片格式是否支持
2. 确认文件大小不超过16MB
3. 尝试使用其他浏览器

### 识别结果异常
1. 确保图片包含清晰人脸
2. 尝试使用不同角度的照片
3. 检查光线条件

## 🔚 停止服务

要停止Web服务，在终端中按 `Ctrl+C` 或关闭终端窗口。

## 📞 技术支持

如果遇到问题，请检查：
1. Python环境是否正确安装
2. 必要的依赖包是否已安装
3. 模型文件是否存在

---

🎉 **现在就去浏览器中试试吧！** 上传一张包含人脸的照片，看看AI如何识别表情！ 